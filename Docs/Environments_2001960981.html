<!DOCTYPE html>
<html>
    <head>
        <title>Blast Royale : Environments</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Blast Royale</a></span>
                            </li>
                                                    <li>
                                <span><a href="1786773509.html">🤖 Tech</a></span>
                            </li>
                                                    <li>
                                <span><a href="Backend_1854144513.html">Backend</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Blast Royale : Environments
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Gabriel</span>, last modified on Aug 03, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style>[data-colorid=blpkba8s37]{color:#97a0af} html[data-color-mode=dark] [data-colorid=blpkba8s37]{color:#505968}[data-colorid=iopuq0p68p]{color:#97a0af} html[data-color-mode=dark] [data-colorid=iopuq0p68p]{color:#505968}[data-colorid=xyzd4o067m]{color:#97a0af} html[data-color-mode=dark] [data-colorid=xyzd4o067m]{color:#505968}[data-colorid=lu4z8849kk]{color:#97a0af} html[data-color-mode=dark] [data-colorid=lu4z8849kk]{color:#505968}[data-colorid=flssnzt5er]{color:#97a0af} html[data-color-mode=dark] [data-colorid=flssnzt5er]{color:#505968}[data-colorid=kjk2r19ujb]{color:#97a0af} html[data-color-mode=dark] [data-colorid=kjk2r19ujb]{color:#505968}[data-colorid=far8ypptyo]{color:#97a0af} html[data-color-mode=dark] [data-colorid=far8ypptyo]{color:#505968}[data-colorid=e0e441mmbb]{color:#bf2600} html[data-color-mode=dark] [data-colorid=e0e441mmbb]{color:#ff6640}[data-colorid=yf5llzesnh]{color:#97a0af} html[data-color-mode=dark] [data-colorid=yf5llzesnh]{color:#505968}</style>We have 3 environments setup to allow to have a full release cycle that includes a release train.<br /><br /><a href="1986461746.html" data-linked-resource-id="1986461746" data-linked-resource-version="14" data-linked-resource-type="page">Release Cycles &amp; Process</a> <br /><br />This means we have <strong>Development &rarr; Staging &rarr; Production</strong> development cycle. </p><h1 id="Environments-AzureSubscriptions"><br /><strong>Azure Subscriptions</strong></h1><p><br />Legacy subscriptions should be removed on Aug 30 2022<br /></p><div class="table-wrap"><table data-layout="default" data-local-id="26c2c1e1-3d52-4606-a133-33b3e17a18a4" class="confluenceTable"><colgroup><col style="width: 340.0px;" /><col style="width: 340.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Name</strong></p></th><th class="confluenceTh"><p><strong>Notes</strong></p></th></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/fedbfcbd-237d-4fc7-9fcb-061659d3fa1e/overview" rel="nofollow">Legacy Dev Subscription</a> <span data-colorid="yf5llzesnh">(flg-legacy-nonprod)</span></p></td><td class="confluenceTd"><h6 id="Environments-StillcontainsNFTJsons&amp;Imagesuploadedonitsstorageaccount:DevStorageAccount">Still contains NFT Jsons &amp; Images uploaded on its storage account:<br /><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/fedbfcbd-237d-4fc7-9fcb-061659d3fa1e/resourceGroups/Dev_Marketplace/providers/Microsoft.Storage/storageAccounts/flgmarketplacestorage/overview" rel="nofollow">Dev Storage Account</a> </h6></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/f6e20b3b-a049-483c-9109-49dca3a33c41/resourceGroups" rel="nofollow">Legacy Prod Subscription</a> <span data-colorid="lu4z8849kk">(flg-legacy-prod)</span></p></td><td class="confluenceTd"><h6 id="Environments-NoMarketplace,Runningcurrentlivegamelogicapp.ThissubscriptioniswhereourCloudJenkinsisrunningatm.">No Marketplace, Running current live game logic app.<br />This subscription is where our Cloud Jenkins is running atm.</h6></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/47751ba7-9fa2-4d17-b35f-3df90aa26907/resourceGroups" rel="nofollow">Dev Gamelogic</a> <span data-colorid="xyzd4o067m">(flg-gamelogic-dev)</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/30b2b858-daad-4f3e-9189-c7c419fe306a/resourceGroups" rel="nofollow">Staging GameLogic</a> <span data-colorid="iopuq0p68p">(flg-gamelogic-staging)</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/dce86de8-1b33-4b88-8466-3b2c7978568f/resourceGroups" rel="nofollow">Prod Gamelogic</a> <span data-colorid="far8ypptyo">(flg-gamelogic-prod)</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/d77d9a43-6680-4cda-95ef-3a736615afd0/resourceGroups" rel="nofollow">Dev Marketplace</a> <span data-colorid="kjk2r19ujb">(flg-marketplace-dev)</span></p></td><td class="confluenceTd"><p>DNS: <a class="external-link" href="https://marketplace-dev.blastroyale.com" rel="nofollow">Dev Marketplace</a> </p></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/fa84212d-5e89-43c1-a422-d75297934757/resourceGroups" rel="nofollow">Staging Marketplace</a> <span data-colorid="flssnzt5er">(flg-marketplace-staging)</span></p></td><td class="confluenceTd"><p>DNS: <a class="external-link" href="https://marketplace-staging.blastroyale.com" rel="nofollow">Staging Marketplace</a> </p></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/f657f5bb-9b5f-46d3-a569-c505a0f30de2/resourceGroups" rel="nofollow">Prod Marketplace</a> <span data-colorid="blpkba8s37">(flg-marketplace-prod)</span></p></td><td class="confluenceTd"><p>DNS: <a class="external-link" href="https://marketplace.blastroyale.com" rel="nofollow">Prod Marketplace</a> </p></td></tr></tbody></table></div><h1 id="Environments-StorageAccounts"><br />Storage Accounts</h1><p>We use storage accounts to have html files for the marketplace and NFT metadata.</p><h6 id="Environments-Tocheckwhichfilesareineachstorage,youneedtoselect“Containers”fromtheleftmenuandselectthe$webContainer."><br />To check which files are in each storage, you need to select &ldquo;Containers&rdquo; from the left menu and select the <code>$web</code> Container.</h6><div class="table-wrap"><table data-layout="default" data-local-id="14a2f064-d4be-4973-a081-2599ac015bf2" class="confluenceTable"><colgroup><col style="width: 620.0px;" /><col style="width: 140.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><h5 id="Environments-Name"><strong>Name</strong></h5></th><th class="confluenceTh"><p><strong>Raw Url</strong></p></th></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/fedbfcbd-237d-4fc7-9fcb-061659d3fa1e/resourceGroups/Dev_Marketplace/providers/Microsoft.Storage/storageAccounts/flgmarketplacestorage" rel="nofollow">Legacy Dev Storage</a> </p></td><td class="confluenceTd"><p><a class="external-link" href="http://flgmarketplacestorage.z33.web.core.windows.net/" rel="nofollow">Legacy Dev Raw Url</a></p></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/d77d9a43-6680-4cda-95ef-3a736615afd0/resourceGroups/marketplace-frontend-dev-rg/providers/Microsoft.Storage/storageAccounts/stbrfrontendflgdev" rel="nofollow">Dev Storage</a> </p></td><td class="confluenceTd"><p><a class="external-link" href="http://stbrfrontendflgdev.z33.web.core.windows.net" rel="nofollow">Dev Raw Url</a> </p></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/fa84212d-5e89-43c1-a422-d75297934757/resourceGroups/marketplace-frontend-staging-rg/providers/Microsoft.Storage/storageAccounts/stbrfrontendflgstaging" rel="nofollow">Staging Storage</a></p></td><td class="confluenceTd"><p><a class="external-link" href="https://stbrfrontendflgstaging.z33.web.core.windows.net" rel="nofollow">Staging Raw Url</a></p></td></tr><tr><td class="confluenceTd"><p><a class="external-link" href="https://portal.azure.com/#@firstlight.games/resource/subscriptions/f6e20b3b-a049-483c-9109-49dca3a33c41/resourceGroups/Blast_Royale_Marketplace/providers/Microsoft.Storage/storageAccounts/flgmarketplacestorageprd" rel="nofollow">Production Storage</a> </p></td><td class="confluenceTd"><p><a class="external-link" href="https://stbrfrontendflgstaging.z33.web.core.windows.net" rel="nofollow">Prod Raw Url</a></p></td></tr></tbody></table></div><h2 id="Environments-Deployment"><strong>Deployment</strong></h2><p>To understand deployment better worth understanding our current architecture: <a href="Backend_1854144513.html" data-linked-resource-id="1854144513" data-linked-resource-version="29" data-linked-resource-type="page">Backend Tech</a> </p><h2 id="Environments-MarketplaceContainers"><strong>Marketplace Containers</strong></h2><p>Marketplace Services are deployed as container images. Those are built in our <a class="createlink" href="/wiki/pages/createpage.action?spaceKey=BB&amp;title=Cloud%20Jenkins&amp;linkCreation=true&amp;fromPageId=2001960981">Jenkins</a> </p><p>Each build with tag the container with its commit hash, pipeline number and environment setup.</p><p>Staging containers are built from <code>release/</code> branches where production containers are built from <code>git tags</code></p><p>After a container is built, that container can be setup to be deployed in Terraform <a class="external-link" href="https://bitbucket.org/first-light/infrastructure/src/22687aa68ff910736847376faea5be849bb59410/config/dev.tfvars#lines-39" rel="nofollow">(Dev Example)</a><br /><em><span data-colorid="e0e441mmbb">Staging and Production Deployments require Pipeline Approval </span></em></p><h2 id="Environments-MarketplaceFrontend"><strong>Marketplace Frontend</strong></h2><p><a class="createlink" href="/wiki/pages/createpage.action?spaceKey=BB&amp;title=Cloud%20Jenkins&amp;linkCreation=true&amp;fromPageId=2001960981">Jenkins</a> should automatically deploy the marketplace frontend files in a CD Pipeline.<br />Frontend environment configuration can be found in .env files on the project. <a class="external-link" href="https://bitbucket.org/first-light/flgmarketplacefrontend/src/develop/.env.development" rel="nofollow">(Dev Example)</a></p><h2 id="Environments-StorageFiles(NFTMetadataetc)"><br /><strong>Storage Files (NFT Metadata etc)</strong><br /></h2><p>All our NFT Metadata, Images &amp; Json References are in Azure Storages in NftMetadata folder. They are manually uploaded and maintained.</p><p>You can use Storage Explorer following this guide <a href="Uploading-Files-to-Azure-Containers_1991147528.html" data-linked-resource-id="1991147528" data-linked-resource-version="3" data-linked-resource-type="page">Uploading Files to Azure Containers</a> </p><p>If you prefer using command-line you can use <a class="external-link" data-card-appearance="inline" href="https://docs.microsoft.com/en-us/cli/azure/" rel="nofollow">https://docs.microsoft.com/en-us/cli/azure/</a> </p><h1 id="Environments-BlockchainEnvironment"><br /><strong>Blockchain Environment</strong></h1><p><br />We currently use <a class="external-link" href="https://moralis.io" rel="nofollow">Moralis</a> as our blockchain data indexing tool. </p><p>We have one Moralis server per environment. <br /><br />Moralis configuration is setup in <a class="createlink" href="/wiki/pages/createpage.action?spaceKey=BB&amp;title=Cloud%20Jenkins&amp;linkCreation=true&amp;fromPageId=2001960981">Jenkins</a> for Backend Services or in <a class="external-link" href="https://bitbucket.org/first-light/flgmarketplacefrontend/src/develop/.env.development" rel="nofollow">Env Files</a> for the frontend. Any Moralis or Contract Address changes needs to reflect in both places.</p><p /><p>For blockchain contracts per environment: <a href="https://firstlightgames.atlassian.net/wiki/spaces/BB/pages/2005565443/Contract+addresses" data-linked-resource-id="2005565443" data-linked-resource-version="27" data-linked-resource-type="page">Contract addresses</a> </p><h1 id="Environments-IPWhitelist"><strong>IP Whitelist</strong></h1><p /><p>Until we have tunneling setup we have a IP Whitelist to access some of our services.<br />If you want to access Jenkins or other pieces of our Services you will be required to be <a class="external-link" href="https://bitbucket.org/first-light/infrastructure/src/22687aa68ff910736847376faea5be849bb59410/config/dev.tfvars#lines-49" rel="nofollow">whitelisted in Terraform</a>.</p><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 30, 2025 14:08</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
